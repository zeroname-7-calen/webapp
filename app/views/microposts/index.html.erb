<div class="micropostpage_title">
  <% @page_title = @user ? @user.name + "さんのツイート" : "ツイートコーナー" %>
  <h4><%= @page_title %></h4>
</div>

<div class="micropost_tool_link">
  <% if current_user %>
    <ul class="toolbar">
      <%= link_to "ツイートの作成", :new_micropost, class: "btn btn-primary btn-sm" %>
      <%= link_to "投票したツイート", user_micropost_voted_path(@microposts, user_id: current_user.id), class: "btn btn-outline-primary btn-sm" %>
    </ul>
  <% end %>
</div>

<div class="micropost_content">
<% if @microposts.present? %>
  <% @microposts.each do |micropost| %>
  <table>
    <tbody>
      <tr>
        <td><%= micropost.content %></td>
      </tr>
      <% if micropost.picture? %>
        <% if micropost.picture.file.content_type.include?('image/') %>
          <%= image_tag micropost.picture.url(:thumb) %>
        <% else %>
          <%= video_tag micropost.picture.url, controls: true, autobuffer: true %>
        <% end %>
      <% end %>
      <tr>
       <td><%= link_to "個別表示", micropost %></td>
      </tr>
      <tr>
        <td><%= render "footer", micropost: micropost %></td>
      </tr>
  <% end %>
  </tbody>
</table>
</div>

<%= paginate @microposts %>
<% else %>
  <p>ツイートはありません</p>
<% end %>
